<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle != null ? pageTitle + ' - SteganoMessages' : 'SteganoMessages'}">SteganoMessages</title>

    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" th:href="@{/favicon.svg}">
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">

    <!-- Meta Tags -->
    <meta name="description" content="Hide messages in plain sight using advanced steganography techniques">
    <meta name="author" content="SteganoMessages">

    <!-- Tailwind CSS - Production Warning Fix -->
    <!-- Note: For production, replace with build process: https://tailwindcss.com/docs/installation -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    borderRadius: {
                        'none': '0',
                        DEFAULT: '0'
                    }
                }
            }
        }
    </script>

    <!-- HTMX -->
    <script th:src="@{/webjars/htmx.org/2.0.4/dist/htmx.min.js}"></script>

    <!-- Global JavaScript -->
    <script th:src="@{/js/app.js}"></script>

    <!-- Custom CSS -->
    <style>
        /* Remove all border radius globally */
        * {
            border-radius: 0 !important;
        }

        /* Dark mode hover fixes for better contrast */
        .dark .hover\:bg-gray-50:hover {
            background-color: #4b5563 !important;
            color: #f9fafb !important;
        }

        .dark .hover\:bg-white:hover {
            background-color: #4b5563 !important;
            color: #f9fafb !important;
        }

        /* File upload styling */
        .file-upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover,
        .file-upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        /* Loading states */
        .htmx-request {
            opacity: 0.5;
        }

        .htmx-request .loading-indicator {
            display: inline-block;
        }

        .loading-indicator {
            display: none;
        }
    </style>

    <!-- Page-specific head content -->
    <th:block th:fragment="extra-head"></th:block>
</head>

<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col">

    <!-- Header -->
    <header th:replace="~{fragments/header :: header}"></header>

    <!-- Flash Messages -->
    <div th:if="${message != null or error != null}" class="max-w-4xl mx-auto w-full px-4 sm:px-6 lg:px-8 mt-4">
        <div th:if="${message != null}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 mb-4"
            role="alert">
            <span th:text="${message}"></span>
        </div>
        <div th:if="${error != null}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 mb-4" role="alert">
            <span th:text="${error}"></span>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow">
        <div class="max-w-4xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8">
            <div layout:fragment="content">
                <!-- Page content goes here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <!-- Page-specific JavaScript -->
    <th:block th:fragment="extra-scripts"></th:block>


</body>

</html>